<UserControl x:Class="ProgressoExpert.Controls.ResBusines.ResBusiness"
             xmlns:local="clr-namespace:ProgressoExpert.Controls.ResBusines"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">
    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="pack://application:,,,/ProgressoExpert;component/Themes/MDT.Expander.xaml" />
            </ResourceDictionary.MergedDictionaries>


            <!-- Simple Expander Button's Template-->
            <ControlTemplate x:Key="SimpleExpanderButtonTemp" TargetType="{x:Type ToggleButton}">
                <Border x:Name="ExpanderButtonBorder"
                    Background="{TemplateBinding Background}"
                    BorderBrush="{TemplateBinding BorderBrush}"
                    BorderThickness="{TemplateBinding BorderThickness}"
                    Padding="{TemplateBinding Padding}"
                    >
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Rectangle Fill="Transparent" Name="Header"
                               Grid.ColumnSpan="2"/>
                        <Ellipse Name="Circle"
                         Grid.Column="0"
                         Stroke="DarkGray"
                         Width="24"
                         Height="24"
                         HorizontalAlignment="Center"
                         VerticalAlignment="Center"
                         />
                        <Path x:Name="Sign"
                      Grid.Column="0"
                      Data="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"
                      Stroke="#FF666666"
                      Fill="Black"
                      Width="24"
                      Height="24"
                      StrokeThickness="1"
                      HorizontalAlignment="Left"
                      VerticalAlignment="Bottom"
                      RenderTransformOrigin="0.5,0.5" Margin="0,0,0,1.5"
                      />
                        <ContentPresenter x:Name="HeaderContent"
                                  Grid.Column="1"
                                  Margin="4,0,0,0"
                                  ContentSource="Content"/>
                    </Grid>
                </Border>
                <ControlTemplate.Triggers>
                    <!--Change the sign to minus when toggled-->
                    <Trigger Property="IsChecked"
                         Value="True">
                        <Setter Property="Data" TargetName="Sign" Value="M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z"/>
                    </Trigger>

                    <!-- MouseOver, Pressed behaviours-->
                    <Trigger Property="IsMouseOver"
                                 Value="true">
                        <Setter Property="Stroke"
                                    Value="White"
                                    TargetName="Circle"/>
                        <Setter Property="Fill"
                                    Value="#035b87"
                                    TargetName="Circle"/>
                        <Setter Property="Stroke"
                                    Value="White"
                                    TargetName="Sign"/>
                        <Setter Property="Fill"
                                    Value="White"
                                    TargetName="Sign"/>
                        <Setter Property="Cursor"
                                    Value="Hand"
                                    TargetName="Sign"/>
                        <Setter Property="Cursor"
                                    Value="Hand"
                                    TargetName="Circle"/>
                        <Setter Property="Cursor"
                                    Value="Hand"
                                    TargetName="HeaderContent"/>
                        <Setter Property="Cursor"
                                    Value="Hand"
                                    TargetName="Header"/>

                    </Trigger>
                    <Trigger Property="IsPressed"
                                 Value="true">
                        <Setter Property="Stroke"
                                    Value="#FF526C7B"
                                    TargetName="Circle"/>
                        <Setter Property="StrokeThickness"
                                    Value="1.5"
                                    TargetName="Circle"/>
                        <Setter Property="Stroke"
                                    Value="#FF003366"
                                    TargetName="Sign"/>
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>

            <!-- Simple Expander Template-->
            <ControlTemplate x:Key="SimpleExpanderTemp" TargetType="{x:Type Expander}">
                <DockPanel>
                    <ToggleButton x:Name="ExpanderButton" 
                              DockPanel.Dock="Top"
                              Template="{StaticResource SimpleExpanderButtonTemp}"
                              Content="{TemplateBinding Header}"
                              IsChecked="{Binding Path=IsExpanded, RelativeSource={RelativeSource TemplatedParent}}"
                              OverridesDefaultStyle="True"
                              Padding="1.5,0">
                    </ToggleButton>
                    <ContentPresenter x:Name="ExpanderContent"
                                  Grid.Row="1" 
                                  Visibility="Collapsed"
                                  DockPanel.Dock="Bottom"/>
                </DockPanel>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsExpanded" Value="True">
                        <Setter TargetName="ExpanderContent" Property="Visibility" Value="Visible"/>
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>

            <!-- Simple Expander Small Button's Template-->
            <ControlTemplate x:Key="SimpleExpanderSmallButtonTemp" TargetType="{x:Type ToggleButton}">
                <Border x:Name="ExpanderButtonBorder"
                    Background="{TemplateBinding Background}"
                    BorderBrush="{TemplateBinding BorderBrush}"
                    BorderThickness="{TemplateBinding BorderThickness}"
                    Padding="{TemplateBinding Padding}"
                    >
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Rectangle Fill="Transparent" Name="Header"
                               Grid.ColumnSpan="2"/>
                        <Ellipse Name="Circle"
                         Grid.Column="0"
                         Stroke="DarkGray"
                         Width="18"
                         Height="18"
                         HorizontalAlignment="Center"
                         VerticalAlignment="Center"
                         />
                        <Path x:Name="Sign"
                      Grid.Column="0"
                      Data="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"
                      Stroke="#FF666666"
                      Fill="Black"
                      Width="24"
                      Height="24"
                      StrokeThickness="0.5"
                      HorizontalAlignment="Center"
                      VerticalAlignment="Center"
                      RenderTransformOrigin="0.5,0.5"
                      />
                        <ContentPresenter x:Name="HeaderContent"
                                  Grid.Column="1"
                                  Margin="4,0,0,0"
                                  ContentSource="Content"/>
                    </Grid>
                </Border>
                <ControlTemplate.Triggers>
                    <!--Change the sign to minus when toggled-->
                    <Trigger Property="IsChecked"
                         Value="True">
                        <Setter Property="Data" TargetName="Sign" Value="M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z"/>
                    </Trigger>

                    <!-- MouseOver, Pressed behaviours-->
                    <Trigger Property="IsMouseOver"
                                 Value="true">
                        <Setter Property="Stroke"
                                    Value="White"
                                    TargetName="Circle"/>
                        <Setter Property="Fill"
                                    Value="#035b87"
                                    TargetName="Circle"/>
                        <Setter Property="Stroke"
                                    Value="White"
                                    TargetName="Sign"/>
                        <Setter Property="Fill"
                                    Value="White"
                                    TargetName="Sign"/>
                        <Setter Property="Cursor"
                                    Value="Hand"
                                    TargetName="Sign"/>
                        <Setter Property="Cursor"
                                    Value="Hand"
                                    TargetName="Circle"/>
                        <Setter Property="Cursor"
                                    Value="Hand"
                                    TargetName="HeaderContent"/>
                        <Setter Property="Cursor"
                                    Value="Hand"
                                    TargetName="Header"/>

                    </Trigger>
                    <Trigger Property="IsPressed"
                                 Value="true">
                        <Setter Property="Stroke"
                                    Value="#FF526C7B"
                                    TargetName="Circle"/>
                        <Setter Property="StrokeThickness"
                                    Value="1.5"
                                    TargetName="Circle"/>
                        <Setter Property="Stroke"
                                    Value="#FF003366"
                                    TargetName="Sign"/>
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>

            <!-- Simple Expander with Small Button Template-->
            <ControlTemplate x:Key="SimpleExpanderSmallBtnTemp" TargetType="{x:Type Expander}">
                <DockPanel>
                    <ToggleButton x:Name="ExpanderButton" 
                              DockPanel.Dock="Top"
                              Template="{StaticResource SimpleExpanderSmallButtonTemp}"
                              Content="{TemplateBinding Header}"
                              IsChecked="{Binding Path=IsExpanded, RelativeSource={RelativeSource TemplatedParent}}"
                              OverridesDefaultStyle="True"
                              Padding="1.5,0">
                    </ToggleButton>
                    <ContentPresenter x:Name="ExpanderContent"
                                  Grid.Row="1" 
                                  Visibility="Collapsed"
                                  DockPanel.Dock="Bottom"/>
                </DockPanel>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsExpanded" Value="True">
                        <Setter TargetName="ExpanderContent" Property="Visibility" Value="Visible"/>
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>

        </ResourceDictionary>
    </UserControl.Resources>
    <Expander IsExpanded="False" OpacityMask="Red"  Name="Exp1" Style="{StaticResource MDTExpanderleMain}" Template="{StaticResource SimpleExpanderTemp}">
        <Expander.Header>
            <StackPanel Orientation="Horizontal">
                <!--<Image Source="/Images/agt_business_2921.png" Width="Auto" Height="53" HorizontalAlignment="Left" OpacityMask="#FF3F669F" ></Image> -->
                <TextBlock Text="Результаты бизнеса" FontSize="20" VerticalAlignment="Center" HorizontalAlignment ="Center" 
                               TextWrapping="Wrap" DockPanel.Dock="Top" Name="HeaderText"/>
            </StackPanel>
        </Expander.Header>
        <!--<Expander.Style>
                <Style TargetType="{x:Type Expander.Header}">
                    <Style.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                        <Setter Property="Foreground" Value="White" TargetName="HeaderText" />
                        </Trigger>
                    </Style.Triggers>
                </Style>
            </Expander.Style>-->
        <Border BorderThickness="2">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>


                <!-- Баланс -->
                <Expander Grid.Row="0" Style="{StaticResource MDTExpanderle16}" Name="BalanceExp" Template="{StaticResource SimpleExpanderSmallBtnTemp}">
                    <Expander.Header>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="Баланс" VerticalAlignment="Center"/>

                            <!-- Таблица/диаграмма -->
                            <ToggleButton Margin="10 0 0 0" Style="{StaticResource MaterialDesignActionSwitchTableToChartToggleButton}" IsChecked="True" 
                                          ToolTip = "Отобразить диаграмму"
                                          Name="BalanceSwitchCheck" Click="BalanceTableCheck_Checked">
                                <StackPanel>
                                    <Viewbox Width="20" Height="20">
                                        <Canvas Width="24" Height="24">
                                            <Path Data="M4,3H20A2,2 0 0,1 22,5V20A2,2 0 0,1 20,22H4A2,2 0 0,1 2,20V5A2,2 0 0,1 4,3M4,7V10H8V7H4M10,7V10H14V7H10M20,10V7H16V10H20M4,12V15H8V12H4M4,20H8V17H4V20M10,12V15H14V12H10M10,20H14V17H10V20M20,20V17H16V20H20M20,12H16V15H20V12Z" 
                                                  Fill="#2196f3" />
                                        </Canvas>
                                    </Viewbox>
                                </StackPanel>
                            </ToggleButton>

                            <!-- Экспорт -->
                            <Button Style="{StaticResource MaterialDesignFloatingActionTransparentButton}" Margin="0 0 0 0" HorizontalAlignment="Left" 
                                    ToolTip="Экспорт в PDF"  Click="BalanceExport_Click" Name="BalanceExport">
                                <Viewbox Width="24" Height="24" VerticalAlignment="Center" HorizontalAlignment="Center">
                                    <Canvas Width="24" Height="24">
                                        <Path Data="M14,9H19.5L14,3.5V9M7,2H15L21,8V20A2,2 0 0,1 19,22H7C5.89,22 5,21.1 5,20V4A2,2 0 0,1 7,2M11.93,12.44C12.34,13.34 12.86,14.08 13.46,14.59L13.87,14.91C13,15.07 11.8,15.35 10.53,15.84V15.84L10.42,15.88L10.92,14.84C11.37,13.97 11.7,13.18 11.93,12.44M18.41,16.25C18.59,16.07 18.68,15.84 18.69,15.59C18.72,15.39 18.67,15.2 18.57,15.04C18.28,14.57 17.53,14.35 16.29,14.35L15,14.42L14.13,13.84C13.5,13.32 12.93,12.41 12.53,11.28L12.57,11.14C12.9,9.81 13.21,8.2 12.55,7.54C12.39,7.38 12.17,7.3 11.94,7.3H11.7C11.33,7.3 11,7.69 10.91,8.07C10.54,9.4 10.76,10.13 11.13,11.34V11.35C10.88,12.23 10.56,13.25 10.05,14.28L9.09,16.08L8.2,16.57C7,17.32 6.43,18.16 6.32,18.69C6.28,18.88 6.3,19.05 6.37,19.23L6.4,19.28L6.88,19.59L7.32,19.7C8.13,19.7 9.05,18.75 10.29,16.63L10.47,16.56C11.5,16.23 12.78,16 14.5,15.81C15.53,16.32 16.74,16.55 17.5,16.55C17.94,16.55 18.24,16.44 18.41,16.25M18,15.54L18.09,15.65C18.08,15.75 18.05,15.76 18,15.78H17.96L17.77,15.8C17.31,15.8 16.6,15.61 15.87,15.29C15.96,15.19 16,15.19 16.1,15.19C17.5,15.19 17.9,15.44 18,15.54M8.83,17C8.18,18.19 7.59,18.85 7.14,19C7.19,18.62 7.64,17.96 8.35,17.31L8.83,17M11.85,10.09C11.62,9.19 11.61,8.46 11.78,8.04L11.85,7.92L12,7.97C12.17,8.21 12.19,8.53 12.09,9.07L12.06,9.23L11.9,10.05L11.85,10.09Z" 
                                              Fill="#2196f3" />
                                    </Canvas>
                                </Viewbox>
                            </Button>
                        </StackPanel>
                    </Expander.Header>
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>
                        <local:RB_Balance x:Name="RB_Balance" Visibility="Visible" Grid.Row="0"/>
                        <Image Source="Chart1.png" x:Name="RB_Balance_Chart"  Visibility="Hidden" Grid.Row="0" Height="360" Width="960" HorizontalAlignment="Left"/>
                    </Grid>
                </Expander>

                <!-- Отчет о прибылях и убытках -->
                <Expander Grid.Row="1" Style="{StaticResource MDTExpanderle16}" 
                          Name="ProfitLossReportExp"  Template="{StaticResource SimpleExpanderSmallBtnTemp}">
                    <Expander.Header>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="Отчет о прибылях и убытках" VerticalAlignment="Center"/>

                            <!-- Таблица/диаграмма -->
                            <ToggleButton Margin="10 0 0 0" Style="{StaticResource MaterialDesignActionSwitchTableToChartToggleButton}" IsChecked="True" 
                                          Name="ProfitLossReportSwitchCheck" Click="ProfitLossReportSwitchCheck_Checked">
                                <StackPanel>
                                    <Viewbox Width="20" Height="20">
                                        <Canvas Width="24" Height="24">
                                            <Path Data="M4,3H20A2,2 0 0,1 22,5V20A2,2 0 0,1 20,22H4A2,2 0 0,1 2,20V5A2,2 0 0,1 4,3M4,7V10H8V7H4M10,7V10H14V7H10M20,10V7H16V10H20M4,12V15H8V12H4M4,20H8V17H4V20M10,12V15H14V12H10M10,20H14V17H10V20M20,20V17H16V20H20M20,12H16V15H20V12Z" 
                                                  Fill="#2196f3" />
                                        </Canvas>
                                    </Viewbox>
                                </StackPanel>
                            </ToggleButton>

                            <!-- Экспорт -->
                            <Button Style="{StaticResource MaterialDesignFloatingActionTransparentButton}" Margin="0 0 0 0" HorizontalAlignment="Left" ToolTip="Экспорт в PDF">
                                <Viewbox Width="24" Height="24" VerticalAlignment="Center" HorizontalAlignment="Center">
                                    <Canvas Width="24" Height="24">
                                        <Path Data="M14,9H19.5L14,3.5V9M7,2H15L21,8V20A2,2 0 0,1 19,22H7C5.89,22 5,21.1 5,20V4A2,2 0 0,1 7,2M11.93,12.44C12.34,13.34 12.86,14.08 13.46,14.59L13.87,14.91C13,15.07 11.8,15.35 10.53,15.84V15.84L10.42,15.88L10.92,14.84C11.37,13.97 11.7,13.18 11.93,12.44M18.41,16.25C18.59,16.07 18.68,15.84 18.69,15.59C18.72,15.39 18.67,15.2 18.57,15.04C18.28,14.57 17.53,14.35 16.29,14.35L15,14.42L14.13,13.84C13.5,13.32 12.93,12.41 12.53,11.28L12.57,11.14C12.9,9.81 13.21,8.2 12.55,7.54C12.39,7.38 12.17,7.3 11.94,7.3H11.7C11.33,7.3 11,7.69 10.91,8.07C10.54,9.4 10.76,10.13 11.13,11.34V11.35C10.88,12.23 10.56,13.25 10.05,14.28L9.09,16.08L8.2,16.57C7,17.32 6.43,18.16 6.32,18.69C6.28,18.88 6.3,19.05 6.37,19.23L6.4,19.28L6.88,19.59L7.32,19.7C8.13,19.7 9.05,18.75 10.29,16.63L10.47,16.56C11.5,16.23 12.78,16 14.5,15.81C15.53,16.32 16.74,16.55 17.5,16.55C17.94,16.55 18.24,16.44 18.41,16.25M18,15.54L18.09,15.65C18.08,15.75 18.05,15.76 18,15.78H17.96L17.77,15.8C17.31,15.8 16.6,15.61 15.87,15.29C15.96,15.19 16,15.19 16.1,15.19C17.5,15.19 17.9,15.44 18,15.54M8.83,17C8.18,18.19 7.59,18.85 7.14,19C7.19,18.62 7.64,17.96 8.35,17.31L8.83,17M11.85,10.09C11.62,9.19 11.61,8.46 11.78,8.04L11.85,7.92L12,7.97C12.17,8.21 12.19,8.53 12.09,9.07L12.06,9.23L11.9,10.05L11.85,10.09Z" 
                                              Fill="#2196f3" />
                                    </Canvas>
                                </Viewbox>
                            </Button>
                        </StackPanel>
                    </Expander.Header>
                    <Grid Name="ProfitLossReportItemsGrid">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>
                        <local:RB_ProfitLossReport x:Name="RB_ProfitLossReport" Grid.Row="0"/>
                        <Image Source="Chart2.png" x:Name="RB_ProfitLossReport_Chart"  Visibility="Hidden" Grid.Row="0" Height="900" Width="1100" HorizontalAlignment="Left"/>
                    </Grid>
                </Expander>

                <!-- Отчет о движении денежных средств -->
                <Expander Grid.Row="2" Style="{StaticResource MDTExpanderle16}"
                              Name="StatementCashFlowsExp"  Template="{StaticResource SimpleExpanderSmallBtnTemp}">
                    <Expander.Header>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="Отчет о движении денежных средств" VerticalAlignment="Center"/>

                            <!-- Экспорт -->
                            <Button Style="{StaticResource MaterialDesignFloatingActionTransparentButton}" Margin="0 0 0 0" HorizontalAlignment="Left" ToolTip="Экспорт в PDF">
                                <Viewbox Width="24" Height="24" VerticalAlignment="Center" HorizontalAlignment="Center">
                                    <Canvas Width="24" Height="24">
                                        <Path Data="M14,9H19.5L14,3.5V9M7,2H15L21,8V20A2,2 0 0,1 19,22H7C5.89,22 5,21.1 5,20V4A2,2 0 0,1 7,2M11.93,12.44C12.34,13.34 12.86,14.08 13.46,14.59L13.87,14.91C13,15.07 11.8,15.35 10.53,15.84V15.84L10.42,15.88L10.92,14.84C11.37,13.97 11.7,13.18 11.93,12.44M18.41,16.25C18.59,16.07 18.68,15.84 18.69,15.59C18.72,15.39 18.67,15.2 18.57,15.04C18.28,14.57 17.53,14.35 16.29,14.35L15,14.42L14.13,13.84C13.5,13.32 12.93,12.41 12.53,11.28L12.57,11.14C12.9,9.81 13.21,8.2 12.55,7.54C12.39,7.38 12.17,7.3 11.94,7.3H11.7C11.33,7.3 11,7.69 10.91,8.07C10.54,9.4 10.76,10.13 11.13,11.34V11.35C10.88,12.23 10.56,13.25 10.05,14.28L9.09,16.08L8.2,16.57C7,17.32 6.43,18.16 6.32,18.69C6.28,18.88 6.3,19.05 6.37,19.23L6.4,19.28L6.88,19.59L7.32,19.7C8.13,19.7 9.05,18.75 10.29,16.63L10.47,16.56C11.5,16.23 12.78,16 14.5,15.81C15.53,16.32 16.74,16.55 17.5,16.55C17.94,16.55 18.24,16.44 18.41,16.25M18,15.54L18.09,15.65C18.08,15.75 18.05,15.76 18,15.78H17.96L17.77,15.8C17.31,15.8 16.6,15.61 15.87,15.29C15.96,15.19 16,15.19 16.1,15.19C17.5,15.19 17.9,15.44 18,15.54M8.83,17C8.18,18.19 7.59,18.85 7.14,19C7.19,18.62 7.64,17.96 8.35,17.31L8.83,17M11.85,10.09C11.62,9.19 11.61,8.46 11.78,8.04L11.85,7.92L12,7.97C12.17,8.21 12.19,8.53 12.09,9.07L12.06,9.23L11.9,10.05L11.85,10.09Z" 
                                              Fill="#2196f3" />
                                    </Canvas>
                                </Viewbox>
                            </Button>
                        </StackPanel>
                    </Expander.Header>
                    <local:RB_StatementCashFlows x:Name="RB_StatementCashFlows" />
                </Expander>
            </Grid>
        </Border>
    </Expander>
</UserControl>

