<UserControl x:Class="ProgressoExpert.Controls.RatiosIndicatorses.RatiosIndicators"
             xmlns:local="clr-namespace:ProgressoExpert.Controls.RatiosIndicatorses"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">
    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="pack://application:,,,/ProgressoExpert;component/Themes/MDT.Expander.xaml" />
            </ResourceDictionary.MergedDictionaries>
            <!-- Simple Expander Button's Template-->
            <ControlTemplate x:Key="SimpleExpanderButtonTemp" TargetType="{x:Type ToggleButton}">
                <Border x:Name="ExpanderButtonBorder"
                    Background="{TemplateBinding Background}"
                    BorderBrush="{TemplateBinding BorderBrush}"
                    BorderThickness="{TemplateBinding BorderThickness}"
                    Padding="{TemplateBinding Padding}"
                    >
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Rectangle Fill="Transparent" Name="Header"
                               Grid.ColumnSpan="2"/>
                        <Ellipse Name="Circle"
                         Grid.Column="0"
                         Stroke="DarkGray"
                         Width="24"
                         Height="24"
                         HorizontalAlignment="Center"
                         VerticalAlignment="Center"
                         />
                        <Path x:Name="Sign"
                      Grid.Column="0"
                      Data="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"
                      Stroke="#FF666666"
                      Fill="Black"
                      Width="24"
                      Height="24"
                      StrokeThickness="1"
                      HorizontalAlignment="Center"
                      VerticalAlignment="Center"
                      RenderTransformOrigin="0.5,0.5"
                      />
                        <ContentPresenter x:Name="HeaderContent"
                                  Grid.Column="1"
                                  Margin="4,0,0,0"
                                  ContentSource="Content"/>
                    </Grid>
                </Border>
                <ControlTemplate.Triggers>
                    <!--Change the sign to minus when toggled-->
                    <Trigger Property="IsChecked"
                         Value="True">
                        <Setter Property="Data" TargetName="Sign" Value="M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z"/>
                    </Trigger>

                    <!-- MouseOver, Pressed behaviours-->
                    <Trigger Property="IsMouseOver"
                                 Value="true">
                        <Setter Property="Stroke"
                                    Value="White"
                                    TargetName="Circle"/>
                        <Setter Property="Fill"
                                    Value="#035b87"
                                    TargetName="Circle"/>
                        <Setter Property="Stroke"
                                    Value="White"
                                    TargetName="Sign"/>
                        <Setter Property="Fill"
                                    Value="White"
                                    TargetName="Sign"/>
                        <Setter Property="Cursor"
                                    Value="Hand"
                                    TargetName="Sign"/>
                        <Setter Property="Cursor"
                                    Value="Hand"
                                    TargetName="Circle"/>
                        <Setter Property="Cursor"
                                    Value="Hand"
                                    TargetName="HeaderContent"/>
                        <Setter Property="Cursor"
                                    Value="Hand"
                                    TargetName="Header"/>

                    </Trigger>
                    <Trigger Property="IsPressed"
                                 Value="true">
                        <Setter Property="Stroke"
                                    Value="#FF526C7B"
                                    TargetName="Circle"/>
                        <Setter Property="StrokeThickness"
                                    Value="1.5"
                                    TargetName="Circle"/>
                        <Setter Property="Stroke"
                                    Value="#FF003366"
                                    TargetName="Sign"/>
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>

            <!-- Simple Expander Template-->
            <ControlTemplate x:Key="SimpleExpanderTemp" TargetType="{x:Type Expander}">
                <DockPanel>
                    <ToggleButton x:Name="ExpanderButton" 
                              DockPanel.Dock="Top"
                              Template="{StaticResource SimpleExpanderButtonTemp}"
                              Content="{TemplateBinding Header}"
                              IsChecked="{Binding Path=IsExpanded, RelativeSource={RelativeSource TemplatedParent}}"
                              OverridesDefaultStyle="True"
                              Padding="1.5,0">
                    </ToggleButton>
                    <ContentPresenter x:Name="ExpanderContent"
                                  Grid.Row="1" 
                                  Visibility="Collapsed"
                                  DockPanel.Dock="Bottom"/>
                </DockPanel>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsExpanded" Value="True">
                        <Setter TargetName="ExpanderContent" Property="Visibility" Value="Visible"/>
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </ResourceDictionary>
    </UserControl.Resources>
    <Expander IsExpanded="False" OpacityMask="Red"  Name="Exp1" Style="{StaticResource MDTExpanderleMain}" Template="{StaticResource SimpleExpanderTemp}" Collapsed="Exp1_Collapsed" Expanded="Exp1_Expanded">
        <Expander.Header >
            <StackPanel Orientation="Horizontal">
                <!--<Image Source="/Images/agt_business_2921.png" Width="Auto" Height="53" HorizontalAlignment="Left" OpacityMask="#FF3F669F" ></Image> -->
                <TextBlock Text="Коэффициенты и основные показатели" FontSize="20" VerticalAlignment="Center" HorizontalAlignment ="Center" TextWrapping="Wrap" DockPanel.Dock="Top"/>

                <!-- Экспорт -->
                <Button Style="{StaticResource MaterialDesignFloatingActionTransparentButton}" Margin="5 0 0 0" HorizontalAlignment="Left" 
                                    ToolTip="Экспорт в PDF" Name="btnExport" Visibility="Hidden">
                    <Viewbox Width="24" Height="24" VerticalAlignment="Center" HorizontalAlignment="Center">
                        <Canvas Width="24" Height="24">
                            <Path Data="M14,9H19.5L14,3.5V9M7,2H15L21,8V20A2,2 0 0,1 19,22H7C5.89,22 5,21.1 5,20V4A2,2 0 0,1 7,2M11.93,12.44C12.34,13.34 12.86,14.08 13.46,14.59L13.87,14.91C13,15.07 11.8,15.35 10.53,15.84V15.84L10.42,15.88L10.92,14.84C11.37,13.97 11.7,13.18 11.93,12.44M18.41,16.25C18.59,16.07 18.68,15.84 18.69,15.59C18.72,15.39 18.67,15.2 18.57,15.04C18.28,14.57 17.53,14.35 16.29,14.35L15,14.42L14.13,13.84C13.5,13.32 12.93,12.41 12.53,11.28L12.57,11.14C12.9,9.81 13.21,8.2 12.55,7.54C12.39,7.38 12.17,7.3 11.94,7.3H11.7C11.33,7.3 11,7.69 10.91,8.07C10.54,9.4 10.76,10.13 11.13,11.34V11.35C10.88,12.23 10.56,13.25 10.05,14.28L9.09,16.08L8.2,16.57C7,17.32 6.43,18.16 6.32,18.69C6.28,18.88 6.3,19.05 6.37,19.23L6.4,19.28L6.88,19.59L7.32,19.7C8.13,19.7 9.05,18.75 10.29,16.63L10.47,16.56C11.5,16.23 12.78,16 14.5,15.81C15.53,16.32 16.74,16.55 17.5,16.55C17.94,16.55 18.24,16.44 18.41,16.25M18,15.54L18.09,15.65C18.08,15.75 18.05,15.76 18,15.78H17.96L17.77,15.8C17.31,15.8 16.6,15.61 15.87,15.29C15.96,15.19 16,15.19 16.1,15.19C17.5,15.19 17.9,15.44 18,15.54M8.83,17C8.18,18.19 7.59,18.85 7.14,19C7.19,18.62 7.64,17.96 8.35,17.31L8.83,17M11.85,10.09C11.62,9.19 11.61,8.46 11.78,8.04L11.85,7.92L12,7.97C12.17,8.21 12.19,8.53 12.09,9.07L12.06,9.23L11.9,10.05L11.85,10.09Z" 
                                              Fill="black" />
                        </Canvas>
                    </Viewbox>
                </Button>
            </StackPanel>
        </Expander.Header>
        <Border BorderThickness="2">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <!-- Ликвидность -->
                <StackPanel Grid.Row="0">
                    <Label Style="{StaticResource MDTExpanderle161}">Ликвидность</Label>
                    <local:RI_Liquidity x:Name="RI_Liquidity" />
                </StackPanel>

                <!-- Показатели деловой активности -->
                <StackPanel Grid.Row="1">
                    <Label Style="{StaticResource MDTExpanderle161}">Показатели деловой активности</Label>
                    <local:RI_BusinessActivity x:Name="RI_BusinessActivity" />
                </StackPanel>

                <!-- Показатели финансовой устойчивости -->
                <StackPanel Grid.Row="2">
                    <Label Style="{StaticResource MDTExpanderle161}">Показатели финансовой устойчивости</Label>
                    <local:RI_FinancialStability x:Name="RI_FinancialStability" />
                </StackPanel>

                <!-- Показатели рентабельности -->
                <StackPanel Grid.Row="3">
                    <Label Style="{StaticResource MDTExpanderle161}">Показатели рентабельности</Label>
                    <local:RI_ProfitabilityRatios x:Name="RI_ProfitabilityRatios" />
                </StackPanel>
            </Grid>
        </Border>
    </Expander>
</UserControl>

